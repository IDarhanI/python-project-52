{% load i18n %}
{% load django_bootstrap5 %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}{% trans "–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–¥–∞—á" %}{% endblock %}</title>
  {% bootstrap_css %}
  {% bootstrap_javascript %}
</head>

<body class="d-flex flex-column min-vh-100 bg-dark text-light">

<nav class="navbar navbar-expand-lg navbar-dark bg-black border-bottom border-secondary">
  <div class="container">

    <a class="navbar-brand fw-bold" href="{% url 'index' %}">
      {% trans "–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–¥–∞—á" %}
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarContent">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarContent">

      <!-- LEFT -->
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link" href="{% url 'users_list' %}">
            {% trans "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" %}
          </a>
        </li>

        {% if user.is_authenticated %}
          <li class="nav-item">
            <a class="nav-link" href="{% url 'statuses_list' %}">
              {% trans "–°—Ç–∞—Ç—É—Å—ã" %}
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'tasks_list' %}">
              {% trans "–ó–∞–¥–∞—á–∏" %}
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'labels_list' %}">
              {% trans "–ú–µ—Ç–∫–∏" %}
            </a>
          </li>
        {% endif %}
      </ul>

      <!-- RIGHT -->
      <div class="d-flex align-items-center gap-3">

        <!-- üåç Language switch -->
        <form action="{% url 'set_language' %}" method="post" class="m-0">
          {% csrf_token %}
          <input type="hidden" name="next" value="{{ request.get_full_path|slice:'3:' }}">

          <select name="language"
                  class="form-select form-select-sm bg-dark text-light border-secondary"
                  onchange="this.form.submit()">
            {% get_current_language as LANGUAGE_CODE %}
            {% get_available_languages as LANGUAGES %}
            {% for lang in LANGUAGES %}
              <option value="{{ lang.0 }}"
                {% if lang.0 == LANGUAGE_CODE %}selected{% endif %}>
                {{ lang.1 }}
              </option>
            {% endfor %}
          </select>
        </form>

        {% if user.is_authenticated %}
          <form action="{% url 'logout' %}" method="post" class="m-0">
            {% csrf_token %}
            <button class="btn btn-outline-danger btn-sm">
              {% trans "–í—ã—Ö–æ–¥" %}
            </button>
          </form>
        {% else %}
          <a class="btn btn-outline-light btn-sm" href="{% url 'login' %}">
            {% trans "–í—Ö–æ–¥" %}
          </a>
          <a class="btn btn-primary btn-sm" href="{% url 'user_create' %}">
            {% trans "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è" %}
          </a>
        {% endif %}

      </div>
    </div>
  </div>
</nav>

<main class="container my-5">
  {% bootstrap_messages %}
  {% block content %}{% endblock %}
</main>

<footer class="mt-auto bg-black text-center py-3 border-top border-secondary">
  <div class="container">
    <span class="text-secondary">
      ¬© {% trans "–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–¥–∞—á" %}
    </span>
  </div>
</footer>

</body>
</html>